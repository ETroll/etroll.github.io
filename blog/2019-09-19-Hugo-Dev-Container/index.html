<!DOCTYPE html>
<html><head>
        <title>
            
                Trollcode.no - A personal blog
            
        </title>

    
    

    <link rel="stylesheet" href="//www.trollcode.no/sass/main.css">
</head><body><menu>
    <ul>
        <li>
            <a href="../../">Home</a>
        </li>
        
        <li>
            <a href="//www.trollcode.no/blog/">Blog</a>
        </li>
        
        <li>
            <a href="//www.trollcode.no/talk/">Talks</a>
        </li>
        
        <li>
            <a href="//www.trollcode.no/stream/">Streaming</a>
        </li>
        
        <li>
            <a href="//www.trollcode.no/about/">About me</a>
        </li>
        
        <li>
            
                <a href="http://github.com/etroll">
                
                <svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub icon</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg>
                </a>
            
                <a href="https://www.linkedin.com/in/karlsyvertloland/">
                
                <svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>LinkedIn icon</title><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg>
                </a>
            
                <a href="https://stackoverflow.com/users/337544/etroll">
                
                <svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Stack Overflow icon</title><path d="M18.986 21.865v-6.404h2.134V24H1.844v-8.539h2.13v6.404h15.012zM6.111 19.731H16.85v-2.137H6.111v2.137zm.259-4.852l10.48 2.189.451-2.07-10.478-2.187-.453 2.068zm1.359-5.056l9.705 4.53.903-1.95-9.706-4.53-.902 1.936v.014zm2.715-4.785l8.217 6.855 1.359-1.62-8.216-6.853-1.35 1.617-.01.001zM15.751 0l-1.746 1.294 6.405 8.604 1.746-1.294L15.749 0h.002z"/></svg>
                </a>
            
                <a href="https://t.me/ETroll">
                
                <svg role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><title>Telegram icon</title><path d="M23.91 3.79L20.3 20.84c-.25 1.21-.98 1.5-2 .94l-5.5-4.07-2.66 2.57c-.3.3-.55.56-1.1.56-.72 0-.6-.27-.84-.95L6.3 13.7l-5.45-1.7c-1.18-.35-1.19-1.16.26-1.75l21.26-8.2c.97-.43 1.9.24 1.53 1.73z"/></svg>
                </a>
            
                <a href="https://www.twitch.tv/karlonazure">
                
                <svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Twitch icon</title><path d="M2.089 0L.525 4.175v16.694h5.736V24h3.132l3.127-3.132h4.695l6.26-6.258V0H2.089zm2.086 2.085H21.39v11.479l-3.652 3.652H12l-3.127 3.127v-3.127H4.175V2.085zM9.915 12.522H12v-6.26H9.915v6.26zm5.735 0h2.086v-6.26H15.65v6.26z"/></svg>
                </a>
            
                <a href="https://twitter.com/etroll">
                
                <svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Twitter icon</title><path d="M23.954 4.569c-.885.389-1.83.654-2.825.775 1.014-.611 1.794-1.574 2.163-2.723-.951.555-2.005.959-3.127 1.184-.896-.959-2.173-1.559-3.591-1.559-2.717 0-4.92 2.203-4.92 4.917 0 .39.045.765.127 1.124C7.691 8.094 4.066 6.13 1.64 3.161c-.427.722-.666 1.561-.666 2.475 0 1.71.87 3.213 2.188 4.096-.807-.026-1.566-.248-2.228-.616v.061c0 2.385 1.693 4.374 3.946 4.827-.413.111-.849.171-1.296.171-.314 0-.615-.03-.916-.086.631 1.953 2.445 3.377 4.604 3.417-1.68 1.319-3.809 2.105-6.102 2.105-.39 0-.779-.023-1.17-.067 2.189 1.394 4.768 2.209 7.557 2.209 9.054 0 13.999-7.496 13.999-13.986 0-.209 0-.42-.015-.63.961-.689 1.8-1.56 2.46-2.548l-.047-.02z"/></svg>
                </a>
            
        </li>
    </ul>

</menu>
<div id="content">
<div>
  <h1 class="blogpost">Hugo and VS Code Dev Containers</h1>
  
  <h4 class="blogpost">September 19, 2019</h4>
  <span class="readingtime">Estimated reading time: 4 minutes</span>
  
  

  

<p>

<img 
    class="blog-paragraph" 
    src="Hugo-logo.jpg" 
    style="width: 18%;height: 18%;"/>

Last month I revamped my old blog. I figured I wanted to write more blog articles and needed a easy platform to do so.
I had previously been using Jekyll and had been quite happy. But after a look at Hugo I wanted to give that a try.
Really just for the &ldquo;kicks of it&rdquo;.</p>

<p>Both are static website generators. But Hugo offers some more bells and whistles that I wanted to make use of like <code>Shortcodes</code> and easy templating.
Jekyll had some of the same features, but I would have to get my hands dirty in some Ruby code if I wanted to create such things.
And not needing to have Ruby installed for building the site locally is a huge plus.
Hugo is a single executable, and easy to move around, or even commit as a part of the site git repository.</p>

<p>This post is not really on Hugo and its capabilities but how to set up a easy dev container that you can use to get started quickly using Hugo on VS Code.</p>

<p class="disclaimer">
    <strong>Disclaimer:</strong> This is strictly just <em>over engineering</em>. Just committing the executable as a part of the git repo is the easiest path to take.
And the results would be the same. But.. It would not be &ldquo;as cool&rdquo;, &ldquo;as hip&rdquo; or whatever you may call it. And since <code>Dev Containers</code> are a bit hyped right now. So why not?
</p>


<p>Dev containers is a new feature in the Visual Studio Code editor that enables you to use a docker container, your local WSL or a remote server as your development environment directly in VS Code. No need to install or set up any dev dependencies. Just open project and the container gets spun up. You can debug and run the code just as you normally would locally. There is little that indicates that you are developing on anything else than your local computer.</p>

<p>I have used this new feature for a while now and have ended up using it for most of my development. Just because it is so easy to switch computers without having to install a whole lot of dependencies when I pop on my laptop and want to work on the project I started on my desktop computer. I can get working on my project without any real downtime having to install anything. That is nice!</p>

<p>If you want to know more about how Dev Containers work and how to get started using it. Then have a look at this site: <a href="https://code.visualstudio.com/docs/remote/containers">Developing inside a container</a>.</p>

<h2 id="vs-code-hugo-dev-container">VS Code Hugo Dev Container</h2>

<p>So let us get in to the details here. Lets see how a dockerfile for such a container looks!</p>

<h3 id="devcontainer-json">devcontainer.json</h3>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">{
	<span style="color:#309;font-weight:bold">&#34;name&#34;</span>: <span style="color:#c30">&#34;Hugo site&#34;</span>,
	<span style="color:#309;font-weight:bold">&#34;dockerFile&#34;</span>: <span style="color:#c30">&#34;Dockerfile&#34;</span>,
	<span style="color:#309;font-weight:bold">&#34;appPort&#34;</span>: <span style="color:#f60">1313</span>,
	<span style="color:#309;font-weight:bold">&#34;extensions&#34;</span>: [<span style="color:#c30">&#34;streetsidesoftware.code-spell-checker&#34;</span>],
	<span style="color:#309;font-weight:bold">&#34;settings&#34;</span>: {
		<span style="color:#309;font-weight:bold">&#34;files.exclude&#34;</span>: {
			<span style="color:#309;font-weight:bold">&#34;**/resources&#34;</span>: <span style="color:#069;font-weight:bold">true</span>
		}
	},
	<span style="color:#309;font-weight:bold">&#34;runArgs&#34;</span>: [ <span style="color:#c30">&#34;-u&#34;</span>, <span style="color:#c30">&#34;vscode&#34;</span> ]
}</code></pre></div>
<h3 id="dockerfile">Dockerfile</h3>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Dockerfile" data-lang="Dockerfile"><span style="color:#069;font-weight:bold">FROM</span><span style="color:#c30"> debian:9</span><span style="color:#a00;background-color:#faa">
</span><span style="color:#a00;background-color:#faa">
</span><span style="color:#a00;background-color:#faa"></span><span style="color:#09f;font-style:italic"># Avoid warnings by switching to noninteractive</span><span style="color:#a00;background-color:#faa">
</span><span style="color:#a00;background-color:#faa"></span><span style="color:#069;font-weight:bold">ENV</span><span style="color:#c30"> DEBIAN_FRONTEND=noninteractive</span><span style="color:#a00;background-color:#faa">
</span><span style="color:#a00;background-color:#faa">
</span><span style="color:#a00;background-color:#faa"></span><span style="color:#09f;font-style:italic"># Or your actual UID, GID on Linux if not the default 1000</span><span style="color:#a00;background-color:#faa">
</span><span style="color:#a00;background-color:#faa"></span>ARG <span style="color:#033">USERNAME</span><span style="color:#555">=</span>vscode<span style="color:#a00;background-color:#faa">
</span><span style="color:#a00;background-color:#faa"></span>ARG <span style="color:#033">USER_UID</span><span style="color:#555">=</span><span style="color:#f60">1000</span><span style="color:#a00;background-color:#faa">
</span><span style="color:#a00;background-color:#faa"></span>ARG <span style="color:#033">USER_GID</span><span style="color:#555">=</span><span style="color:#033">$USER_UID</span><span style="color:#a00;background-color:#faa">
</span><span style="color:#a00;background-color:#faa">
</span><span style="color:#a00;background-color:#faa"></span><span style="color:#09f;font-style:italic"># Configure apt and install packages</span><span style="color:#a00;background-color:#faa">
</span><span style="color:#a00;background-color:#faa"></span><span style="color:#069;font-weight:bold">RUN</span> apt-get update <span style="color:#c30;font-weight:bold">\
</span><span style="color:#c30;font-weight:bold"></span>    <span style="color:#555">&amp;&amp;</span> apt-get -y install --no-install-recommends apt-utils dialog <span style="color:#f60">2</span>&gt;&amp;<span style="color:#f60">1</span> <span style="color:#c30;font-weight:bold">\
</span><span style="color:#c30;font-weight:bold"></span>    <span style="color:#555">&amp;&amp;</span> apt-get -y install git procps lsb-release wget <span style="color:#c30;font-weight:bold">\
</span><span style="color:#c30;font-weight:bold"></span>    <span style="color:#555">&amp;&amp;</span> wget https://github.com/gohugoio/hugo/releases/download/v0.58.3/hugo_extended_0.58.3_Linux-64bit.deb <span style="color:#c30;font-weight:bold">\
</span><span style="color:#c30;font-weight:bold"></span>    <span style="color:#555">&amp;&amp;</span> dpkg -i hugo_extended_0.58.3_Linux-64bit.deb <span style="color:#c30;font-weight:bold">\
</span><span style="color:#c30;font-weight:bold"></span>    <span style="color:#555">&amp;&amp;</span> rm hugo_extended_0.58.3_Linux-64bit.deb <span style="color:#c30;font-weight:bold">\
</span><span style="color:#c30;font-weight:bold"></span>    #<span style="color:#a00;background-color:#faa">
</span><span style="color:#a00;background-color:#faa"></span>    <span style="color:#09f;font-style:italic"># Create a non-root user to use if preferred - see https://aka.ms/vscode-remote/containers/non-root-user.</span><span style="color:#a00;background-color:#faa">
</span><span style="color:#a00;background-color:#faa"></span>    <span style="color:#555">&amp;&amp;</span> groupadd --gid <span style="color:#033">$USER_GID</span> <span style="color:#033">$USERNAME</span> <span style="color:#c30;font-weight:bold">\
</span><span style="color:#c30;font-weight:bold"></span>    <span style="color:#555">&amp;&amp;</span> useradd -s /bin/bash --uid <span style="color:#033">$USER_UID</span> --gid <span style="color:#033">$USER_GID</span> -m <span style="color:#033">$USERNAME</span> <span style="color:#c30;font-weight:bold">\
</span><span style="color:#c30;font-weight:bold"></span>    <span style="color:#09f;font-style:italic"># Add sudo support for non-root user</span><span style="color:#a00;background-color:#faa">
</span><span style="color:#a00;background-color:#faa"></span>    <span style="color:#555">&amp;&amp;</span> apt-get install -y sudo <span style="color:#c30;font-weight:bold">\
</span><span style="color:#c30;font-weight:bold"></span>    <span style="color:#555">&amp;&amp;</span> <span style="color:#366">echo</span> <span style="color:#033">$USERNAME</span> <span style="color:#033">ALL</span><span style="color:#555">=</span><span style="color:#c30;font-weight:bold">\(</span>root<span style="color:#c30;font-weight:bold">\)</span> NOPASSWD:ALL &gt; /etc/sudoers.d/<span style="color:#033">$USERNAME</span> <span style="color:#c30;font-weight:bold">\
</span><span style="color:#c30;font-weight:bold"></span>    <span style="color:#555">&amp;&amp;</span> chmod <span style="color:#f60">0440</span> /etc/sudoers.d/<span style="color:#033">$USERNAME</span> <span style="color:#c30;font-weight:bold">\
</span><span style="color:#c30;font-weight:bold"></span>    #<span style="color:#a00;background-color:#faa">
</span><span style="color:#a00;background-color:#faa"></span>    <span style="color:#09f;font-style:italic"># Clean up</span><span style="color:#a00;background-color:#faa">
</span><span style="color:#a00;background-color:#faa"></span>    <span style="color:#555">&amp;&amp;</span> apt-get autoremove -y <span style="color:#c30;font-weight:bold">\
</span><span style="color:#c30;font-weight:bold"></span>    <span style="color:#555">&amp;&amp;</span> apt-get clean -y <span style="color:#c30;font-weight:bold">\
</span><span style="color:#c30;font-weight:bold"></span>    <span style="color:#555">&amp;&amp;</span> rm -rf /var/lib/apt/lists/*<span style="color:#a00;background-color:#faa">
</span><span style="color:#a00;background-color:#faa">
</span><span style="color:#a00;background-color:#faa"></span><span style="color:#09f;font-style:italic"># Switch back to dialog for any ad-hoc use of apt-get</span><span style="color:#a00;background-color:#faa">
</span><span style="color:#a00;background-color:#faa"></span><span style="color:#069;font-weight:bold">ENV</span><span style="color:#c30"> DEBIAN_FRONTEND=</span></code></pre></div>
<h2 id="all-done">All done!</h2>

<p>So that is it! There is &ldquo;nothing more too it&rdquo;. Even though this is <em>way more</em> than one would normally need to do to get this up and running. But why engineer when one can over engineer! (I am looking at you Javascript developers!)</p>

</div>


        </div><footer>
    <div>
        &copy; 2014 - 2019 Karl Syvert Løland - All Rights Reserved
    </div>
</footer>
    </body>
</html>
